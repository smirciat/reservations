{"filter":false,"title":"gridSettings.service.js","tooltip":"/client/components/gridSettings/gridSettings.service.js","undoManager":{"mark":11,"position":11,"stack":[[{"start":{"row":0,"column":0},"end":{"row":16,"column":0},"action":"remove","lines":["'use strict';","","angular.module('workApp')","  .factory('gridSettings', function () {","    // Service logic","    // ...","","    var meaningOfLife = 42;","","    // Public API here","    return {","      someMethod: function () {","        return meaningOfLife;","      }","    };","  });",""],"id":2},{"start":{"row":0,"column":0},"end":{"row":158,"column":0},"action":"insert","lines":["'use strict';","","angular.module('workspaceApp')","  .factory('gridSettings', function (uiGridConstants, $http) {","    var flightDate;","    var flightHour;","    var params={};","    //flights api options within an bject","    params.flights = {","      gridOptions: {","        rowEditWaitInterval: 0,","        enableCellEditOnFocus: true,","        columnDefs: [","          { name: ' ', cellTemplate: '<div><button type=\"button\" id=\"removeRow\"  ng-click=\"grid.appScope.removeRow(row)\">X</button></div>', width:27 },","          { name: 'hourOfDay'},","          { name: 'number', displayName:'Flight Number', sort: {","                direction: uiGridConstants.ASC, priority: 1  }},","          { name: 'date', displayName:'Flight Date', type:'date', sort: {","                direction: uiGridConstants.ASC, priority: 0 }, ","                cellFilter: 'date:\"MM/dd/yyyy\"' },","          { name: 'pilot'},","          { name: 'aircraft'} ","        ],","        data : [] ","      },","      ","      newRecord: { number: 'fltNum', date:new Date(), pilot:'pilot', aircraft:  'aircraft' ","      },","      ","      preSave: ['date'] ,","      ","      processAfterGet: function(data){return data;}","      ","    };","","    params.reservations = {","      gridOptions:{","      rowEditWaitInterval: 0,","      enableCellEditOnFocus: true,","      columnDefs: [","          { name: ' ', cellTemplate: '<div><button type=\"button\" id=\"removeRow\"  ng-click=\"grid.appScope.removeRow(row)\">X</button></div>', width:27 },","          { name: 'name' },","          { name: 'customerId'}, ","          { name: 'Flight Number', field: 'flightId.value', editModelField: 'flightId', ","             editDropdownOptionsArray: [], editableCellTemplate: '<ui-select-wrap><ui-select ng-model=\"MODEL_COL_FIELD\" theme=\"selectize\" ng-disabled=\"disabled\" append-to-body=\"true\"><ui-select-match placeholder=\"Choose...\">{{ COL_FIELD }}</ui-select-match><ui-select-choices repeat=\"item in col.colDef.editDropdownOptionsArray | filter: $select.search\" refresh=\"grid.appScope.refreshOptions()\"><span>{{ item.value }}</span></ui-select-choices></ui-select></ui-select-wrap>' },","          { name: 'hourOfDay'},","          { name: 'date' , type: 'date', cellFilter: 'date:\"MM/dd/yyyy\"'},","          { name: 'weight'},","          { name: 'freightWeight'},","          { name: 'Travel Code', field: 'travelCodeId.value', editModelField: 'travelCodeId', ","             editDropdownOptionsArray: [], editableCellTemplate: '<ui-select-wrap><ui-select ng-model=\"MODEL_COL_FIELD\" theme=\"selectize\" ng-disabled=\"disabled\" append-to-body=\"true\"><ui-select-match placeholder=\"Choose...\">{{ COL_FIELD }}</ui-select-match><ui-select-choices repeat=\"item in col.colDef.editDropdownOptionsArray | filter: $select.search\" refresh=\"grid.appScope.refreshOptions()\"><span>{{ item.value }}</span></ui-select-choices></ui-select></ui-select-wrap>' },","          { name: 'dateReserved', type: 'date', cellFilter: 'date:\"MM/dd/yyyy\"'},","          { name: 'dateModified', type: 'date', cellFilter: 'date:\"MM/dd/yyyy\"'}","      ],","      data : [] },","      ","      newRecord: {","          name: 'name' ,","          customerId: 'customerId',","          flightId: 'flightId',","          hourOfDay: 8,","          date : new Date(),","          weight : 0,","          freightWeight: 0,","          travelCodeId: 'travCodeId',","          dateReserved: new Date(),","          dateModified: new Date()","      },","      ","      preSave: ['date','dateModified','dateReserved'],","      ","      processAfterGet: function(data){","        data.forEach(function(d){","          if (d.travelCodeId) d.travelCodeId.value = d.travelCodeId.code;","          if (d.flightId) d.flightId.value = d.flightId.number;","        });","        return data;","        ","      }","      ","    };","    ","    params.travelCodes = {","      gridOptions: {","        rowEditWaitInterval: 0,","        enableCellEditOnFocus: true,","        columnDefs: [","          { name: ' ', cellTemplate: '<div><button type=\"button\" id=\"removeRow\" ng-click=\"grid.appScope.removeRow(row)\">X</button></div>', width:27 },","          { name: 'code', displayName:'Travel Code' },","          { name: 'depart', displayName:'Departure Location' },","          { name: 'arrive', displayName:'Arrival Location' },","          { name: 'index', displayName:'Index', type:'number', sort: {","                direction: uiGridConstants.ASC, priority: 0} ","          }","        ],","        data : [] ","        ","      },","      ","      newRecord: {","          code:'travel code',depart:'depart', arrive:'arrive', index: 0 ","      },","      ","      preSave: [],","      ","      processAfterGet: function(data){return data;}","      ","    };","    ","    $http.get('/api/travelCodes').success(function(data){","      var max=0;","      data.forEach(function(d){","        if (d.index>max) max=d.index;","      });","      ","      params.travelCodes.newRecord={","          code:'travel code',depart:'depart', arrive:'arrive', index: max+1","      };","    });","    ","    return {","      get: function(apiName){","        return params[apiName];","      },","      ","      getNew: function(apiName){","        return params[apiName].newRecord;","      },","      ","      getFun: function(apiName, data){","        return params[apiName].processAfterGet(data);","      },","      ","      setCriteria: function(date, hour){","        flightDate=date;","        flightHour=hour;","      },","","      testItem: function(item){","        if (flightDate&&item.date){","          var date=flightDate;","          date = new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0); ","          var endDate = new Date(date.getFullYear(),date.getMonth(),date.getDate(),23,59,59);","          if (item.date<date||item.date>endDate) return false;","        } ","        if (flightHour&&flightHour!==item.hourOfDay) return false;","        return true;","      },","      ","      getQuery: function(){","        var queryString=\"\";","        if (flightDate) queryString+=\"date=\"+flightDate;","        if (flightHour) queryString+=\"&hourOfDay=\"+flightHour;","        return queryString;","      }","      ","    };","  });",""]}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["s"],"id":3}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["p"],"id":4}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["a"],"id":5}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["c"],"id":6}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["e"],"id":7}],[{"start":{"row":109,"column":30},"end":{"row":109,"column":31},"action":"remove","lines":["s"],"id":8}],[{"start":{"row":109,"column":30},"end":{"row":109,"column":31},"action":"insert","lines":["s"],"id":9}],[{"start":{"row":109,"column":30},"end":{"row":109,"column":31},"action":"remove","lines":["s"],"id":10}],[{"start":{"row":8,"column":17},"end":{"row":8,"column":18},"action":"remove","lines":["s"],"id":11}],[{"start":{"row":35,"column":22},"end":{"row":35,"column":23},"action":"remove","lines":["s"],"id":12}],[{"start":{"row":82,"column":21},"end":{"row":82,"column":22},"action":"remove","lines":["s"],"id":13}]]},"ace":{"folds":[],"scrolltop":1260,"scrollleft":0,"selection":{"start":{"row":82,"column":21},"end":{"row":82,"column":21},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1454625114322,"hash":"ec500381b1fe401d6aa5be5b7652558163a49441"}