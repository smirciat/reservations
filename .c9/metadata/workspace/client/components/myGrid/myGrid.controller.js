{"filter":false,"title":"myGrid.controller.js","tooltip":"/client/components/myGrid/myGrid.controller.js","undoManager":{"mark":5,"position":5,"stack":[[{"start":{"row":0,"column":0},"end":{"row":60,"column":0},"action":"insert","lines":["'use strict';","","angular.module('workspaceApp')","  .controller('MyGridCtrl', function ($scope, $http, $interval, $q, uiGridConstants) {","    ","    $scope.gridOptions={","      rowEditWaitInterval: 0,","      columnDefs: [","          { name: 'number', displayName:'Flight Number', sort: {","                direction: uiGridConstants.ASC, priority: 1  }},","          { name: 'date', displayName:'Flight Date', type:'date', sort: {","                direction: uiGridConstants.ASC, priority: 0 }, ","                cellFilter: 'date:\"MM/dd/yyyy\"' },","          { name: 'pilot'},","          { name: 'aircraft'} ","      ],","      data : [] };","    ","    $scope.addData = function(){","      $scope.gridOptions.data.push({","        number: 'fltNum', date:new Date(), pilot:'pilot', aircraft:  'aircraft' ","      });","    };","    ","    $scope.removeRow = function() {","       if ($scope.selectedRowId.isSelected) {","         $scope.selectedRowId.isSelected=false;","         if ($scope.selectedRowId.entity._id) $http.delete('/api/flights/' + $scope.selectedRowId.entity._id);","         for (var i=0;i<$scope.gridOptions.data.length;i++){","           if ($scope.gridOptions.data[i]._id===$scope.selectedRowId.entity._id) {","             $scope.gridOptions.data.splice(i,1);","             i=$scope.gridOptions.data.length+2;","           }","         } ","       } ","    };","    $scope.saveRow = function( rowEntity ) {","      var promise;","      rowEntity.date=new Date(rowEntity.date);","      if (rowEntity._id) promise = $http.put('/api/flights/'+rowEntity._id, rowEntity);","      else promise = $http.post('/api/flights/', rowEntity);","      $scope.gridApi.rowEdit.setSavePromise( rowEntity, promise );","    };","    $scope.gridOptions.multiSelect=false;","    $scope.gridOptions.onRegisterApi = function(gridApi){","    //set gridApi on scope","      $scope.gridApi = gridApi;","      gridApi.rowEdit.on.saveRow($scope, $scope.saveRow);","      $scope.gridApi.selection.setMultiSelect=false;","      gridApi.selection.on.rowSelectionChanged($scope,function(row){","        $scope.selectedRowId=row;","      });","    };","    $scope.selectedRowId = {};","    $http.get('/api/flights').success(function(tCodes){","      $scope.gridOptions.data=tCodes;","    });","","    ","  });",""],"id":1}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["s"],"id":2}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["p"],"id":3}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["a"],"id":4}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["c"],"id":5}],[{"start":{"row":2,"column":20},"end":{"row":2,"column":21},"action":"remove","lines":["e"],"id":6}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":2,"column":20},"end":{"row":2,"column":20},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1454610315433,"hash":"cc641bf2e6337452f901abee915af56f7d3e503d"}